<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.34 in css mode. -->
<html>
  <head>
    <title>macro.org</title>
    <style type="text/css">
    <!--
      body {
        color: #F8F8F8;
        background-color: #0C1021;
      }
      .comment {
        /* font-lock-comment-face */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block {
        /* org-block */
        color: #b3b3b3;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-size: 144%;
        font-weight: bold;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #AEAEAE;
        font-style: italic;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="comment"># -*- coding:utf-8 -*-</span>
<span class="org-meta-line">#+LANGUAGE:  zh
</span><span class="org-document-info-keyword">#+TITLE:</span><span class="comment">     </span><span class="org-document-title">c&#20013;&#30340;&#23439;</span>
<span class="org-document-info-keyword">#+AUTHOR:</span><span class="comment">    </span><span class="org-document-info">&#32426;&#31168;&#23792;</span>
<span class="org-document-info-keyword">#+EMAIL:</span><span class="comment">     </span><span class="org-document-info">jixiuf@gmail.com</span>
<span class="org-document-info-keyword">#+DATE:</span><span class="comment">     </span><span class="org-document-info">2011-10-24 &#19968;</span>
<span class="org-meta-line">#+DESCRIPTION:c&#20013;&#30340;&#23439;
#+KEYWORDS: macro c &#23439;
#+OPTIONS:   H:2 num:nil toc:t \n:t @:t ::t |:t ^:t -:t f:t *:t &lt;:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil 
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+FILETAGS: @C
</span>
<span class="org-block-begin-line">#+begin_src c
</span><span class="org-block">#&#19982;##&#22312;&#23439;&#23450;&#20041;&#20013;&#30340;--&#23439;&#23637;&#24320;
#include &lt;stdio.h&gt;
#define f(a,b) a##b
#define g(a) #a
#define h(a) g(a)
int main()
{
  printf("%s\n", h(f(1,2))); // 12
  printf("%s\n", g(f(1,2))); // f(1,2)
  return 0;
}
</span><span class="org-block-end-line">#+end_src
</span><span class="org-block-begin-line">#+begin_quote
</span> "#" &#19982;"##" &#26159;&#23439;&#20013;&#20004;&#20010;&#29305;&#27530;&#30340;&#31526;&#21495;
 "##"&#30456;&#24403;&#20110;&#36830;&#23383;&#31526;,&#21363;java&#20013;&#36827;&#34892;&#23383;&#31526;&#20018;&#36830;&#25509;&#30340;&#21152;&#21495;,sqlplus &#20013;&#30340;||  &#22914;a##b##c &#31561;&#21516;&#20110; "abc"
 &#32780;#&#29992;&#26469;&#25511;&#21046;&#26159;&#21542;&#23637;&#24320;&#23439;,&#19979;&#38754;&#35814;&#35299;.<span class="org-meta-line">
</span><span class="org-block-end-line">#+end_quote
</span>  + &#35268;&#21017;1: &#22914;&#26524;&#23439;&#23450;&#20041;&#20197;#&#24320;&#22836;&#65292;&#19981;&#23637;&#24320;&#21442;&#25968;&#65292;&#30452;&#25509;&#26367;&#25442;&#12290; &#35268;&#21017;1&#21253;&#25324;&#19977;&#21477;&#35805;
   - &#22914;&#26524;&#23439;&#23450;&#20041;&#20197;#&#24320;&#22836;,
     &#22312;&#20195;&#30721;&#20013;&#36935;&#21040;&#19968;&#20010;&#23439;,&#32780;&#36825;&#20010;&#23439;&#30340;&#23450;&#20041;,&#20108;&#35805;&#27809;&#35828;,&#31532;&#19968;&#20010;&#23383;&#31526;&#26159;#
   - &#19981;&#23637;&#24320;&#21442;&#25968;
     &#26080;&#35770;&#21442;&#25968;&#26377;&#22810;&#22797;&#26434;,&#25226;&#23427;&#20316;&#20026;&#19968;&#20010;&#23383;&#31526;&#20018;&#25972;&#20307;,&#19981;&#20877;&#36827;&#34892;&#23637;&#24320;,&#22240;&#20026;&#19968;&#20010;&#23439;&#20869;&#23481;&#20013;
     &#21487;&#33021;&#21253;&#21547;&#21478;&#19968;&#20010;&#23439;,&#27491;&#24120;&#24773;&#20917;&#19979;,&#36825;&#20010;&#23439;&#20013;&#23439;&#20063;&#20250;&#34987;&#23637;&#24320;,&#20294;&#36935;&#21040;#&#21017;&#20363;&#22806;.
   - &#30452;&#25509;&#26367;&#25442;&#12290;     
     &#25226;&#36825;&#20010;&#21442;&#25968;&#25918;&#21040;&#23439;&#20869;&#23481;&#20013;&#21442;&#25968;&#30340;&#30456;&#24212;&#20301;&#32622;,&#21363;&#25152;&#35859;&#30340;"&#30452;&#25509;&#26367;&#25442;".
     &#27604;&#22914; &#19979;&#38754;&#36825;&#20010;&#23439; 
<span class="org-block-begin-line">     #+begin_src c
</span><span class="org-block">     #define g(a) #a
      &#36825;&#20010;&#23439;&#30340;&#20869;&#23481;&#20197;#&#24320;&#22836;,&#23427;&#30340;&#21442;&#25968;&#21517;&#20026;a
     &#19979;&#38754;&#23545;&#20854;&#36827;&#34892;&#35843;&#29992;&#26102;&#20256;&#36807;&#21435;&#30340;&#21442;&#25968;&#26159;"f(1,2)"
     &#34429;&#28982;&#20256;&#36807;&#21435;&#30340;&#21442;&#25968;&#26159;&#21478;&#19968;&#20010;&#23439;,&#20294;&#24182;&#19981;&#25226;&#23427;&#24403;&#20316;&#23439;,&#32780;&#20165;&#35748;&#20026;&#23427;&#26159;&#20010;&#23383;&#31526;&#20018;
      printf("%s\n", g(f(1,2))); //&#32467;&#26524;&#25171;: f(1,2)
</span><span class="org-block-end-line">     #+end_src
</span> + &#35268;&#21017;2:&#22914;&#26524;&#23439;&#23450;&#20041;&#19981;&#20197;#&#24320;&#22836;&#65292;&#23637;&#24320;&#21442;&#25968;&#65292;&#30452;&#25509;&#26367;&#25442;&#65292;&#22914;&#26524;&#30896;&#21040;&#30340;&#26159;#&#24320;&#22836;&#30340;&#23439;&#65292;&#19981;&#32487;&#32493;&#24448;&#37324;&#23618;&#23637;&#24320;&#65292;&#24448;&#22806;&#23618;&#23637;&#24320;&#12290;
    - &#21547;&#20041;&#26159;,&#39318;&#20808;&#25226;&#21442;&#25968;&#20316;&#20026;&#19968;&#20010;&#23439;&#36827;&#34892;&#23637;&#24320;,&#23558;&#20854;&#23637;&#24320;&#21518;&#30340;&#32467;&#26524;&#20316;&#20026;&#21442;&#25968;&#20256;&#21040;&#26412;&#23439;
      &#20013;,&#28982;&#21518;&#25165;&#23545;&#26412;&#23439;&#36827;&#34892;&#23637;&#24320;
<span class="org-block-begin-line">      #+begin_src c
</span><span class="org-block">       printf("%s\n", h(f(1,2))); // 12
</span><span class="org-block-end-line">      #+end_src
</span>        &#27604;&#22914;&#23545;h(a)&#36825;&#20010;&#23439;,&#20256;&#36807;&#21435;&#30340;&#21442;&#25968;&#26159;"f(1,2)",&#39318;&#20808;&#25226;&#20854;&#20316;&#20026;&#19968;&#20010;&#23439;&#36827;&#34892;&#23637;&#24320;
        &#22914;&#23637;&#24320; f(1,2)&#30340;&#32467;&#26524;&#26159;:12
        &#28982;&#21518;&#23545;h(12)&#36827;&#34892;&#23637;&#24320;,&#31532;&#19968;&#27493;&#23637;&#24320;&#30340;&#32467;&#26524;&#26159;g(12)
        g(12)&#23637;&#24320;&#30340;&#32467;&#26524;&#26159;12
        h(f(1,2))--&gt;h(12)--&gt;g(12)--&gt;12
      

<span class="org-block-begin-line">#+begin_src c
</span><span class="org-block">&#21478;&#22806;&#20960;&#20010;&#26356;&#22797;&#26434;&#30340;&#20363;&#23376;
printf("%s\n", h(f(1,2))); // 12
  printf("%s\n", g(f(1,2))); // f(1,2)
  printf("%s\n", g(h(f(1,2)))); // h(f(1,2))
  printf("%s\n", h(g(f(1,2)))); // "f(1,2)"
  printf("%s\n", h(h(f(1,2)))); // "12"
</span><span class="org-block-end-line">#+end_src
</span>&#24635;&#32780;&#35328;&#20043;,&#20808;&#23637;&#24320;&#21442;&#25968;,&#20877;&#23637;&#24320;&#33258;&#36523;. &#36935;#&#21017;&#20572;
&#21478;&#22806;,&#22914;&#26524;&#39564;&#35777;&#32467;&#26524;gcc &#21487;&#20197;&#21152; -E &#36873;&#39033;
<span class="org-block-begin-line">#+begin_src sh
</span><span class="org-block">gcc -E macro.c
&#25110;
gcc -E macro.c -o macro.i
</span><span class="org-block-end-line">#+end_src
</span></pre>
  </body>
</html>
