<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.34 in css mode. -->
<html>
  <head>
    <title>int.org</title>
    <style type="text/css">
    <!--
      body {
        color: #F8F8F8;
        background-color: #0C1021;
      }
      .comment {
        /* font-lock-comment-face */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block {
        /* org-block */
        color: #b3b3b3;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-size: 144%;
        font-weight: bold;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #AEAEAE;
        font-style: italic;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="comment"># -*- coding:utf-8 -*-</span>
<span class="org-meta-line">#+LANGUAGE:  zh
</span><span class="org-document-info-keyword">#+TITLE:</span><span class="comment">     </span><span class="org-document-title">&#25968;&#20540;&#36716;&#25442;</span>
<span class="org-document-info-keyword">#+AUTHOR:</span><span class="comment">    </span><span class="org-document-info">&#32426;&#31168;&#23792;</span>
<span class="org-document-info-keyword">#+EMAIL:</span><span class="comment">     </span><span class="org-document-info">jixiuf@gmail.com</span>
<span class="org-document-info-keyword">#+DATE:</span><span class="comment">     </span><span class="org-document-info">2012-04-23 &#19968;</span>
<span class="org-meta-line">#+DESCRIPTION:&#25968;&#20540;&#36716;&#25442;
#+KEYWORDS: @C
#+OPTIONS:   H:2 num:nil toc:t \n:t @:t ::t |:t ^:nil -:t f:t *:t &lt;:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil
#+FILETAGS: @C
</span><span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">  int atoi(const char *nptr);
  double atof(const char *nptr);
   /* &#36820;&#22238;&#20540;&#65306;&#36716;&#25442;&#32467;&#26524; */
</span><span class="org-block-end-line">#+END_SRC
</span>
atoi&#25226;&#19968;&#20010;&#23383;&#31526;&#20018;&#24320;&#22836;&#21487;&#20197;&#35782;&#21035;&#25104;&#21313;&#36827;&#21046;&#25972;&#25968;&#30340;&#37096;&#20998;&#36716;&#25442;&#25104;int&#22411;&#65292;&#30456;&#24403;&#20110;&#19979;&#38754;&#35201;&#35762;&#30340;
strtol(nptr, (char **) NULL, 10);&#12290;&#20363;&#22914;atoi("123abc")&#30340;&#36820;&#22238;&#20540;&#26159;123&#65292;&#23383;&#31526;&#20018;&#24320;&#22836;
&#21487;&#20197;&#26377;&#33509;&#24178;&#31354;&#26684;&#65292;&#20363;&#22914;atoi(" -90.6-")&#30340;&#36820;&#22238;&#20540;&#26159;-90&#12290;&#22914;&#26524;&#23383;&#31526;&#20018;&#24320;&#22836;&#27809;&#26377;&#21487;&#35782;&#21035;&#30340;&#25972;
&#25968;&#65292;&#20363;&#22914;atoi("asdf")&#65292;&#21017;&#36820;&#22238;0&#65292;&#32780;atoi("0***")&#20063;&#36820;&#22238;0&#65292;&#26681;&#25454;&#36820;&#22238;&#20540;&#24182;&#19981;&#33021;&#21306;&#20998;&#36825;&#20004;
&#31181;&#24773;&#20917;&#65292;&#25152;&#20197;&#20351;&#29992;atoi&#20989;&#25968;&#19981;&#33021;&#26816;&#26597;&#20986;&#38169;&#30340;&#24773;&#20917;&#12290;&#19979;&#38754;&#35201;&#35762;&#30340;strtol&#20989;&#25968;&#21487;&#20197;&#35774;&#32622;errno&#65292;
&#22240;&#27492;&#21487;&#20197;&#26816;&#26597;&#20986;&#38169;&#30340;&#24773;&#20917;&#65292;&#22312;&#20005;&#26684;&#30340;&#22330;&#21512;&#19979;&#24212;&#35813;&#29992;strtol&#65292;&#32780;atoi&#29992;&#36215;&#26469;&#26356;&#31616;&#20415;&#65292;&#25152;&#20197;&#20063;
&#24456;&#24120;&#29992;&#12290;

atof&#25226;&#19968;&#20010;&#23383;&#31526;&#20018;&#24320;&#22836;&#21487;&#20197;&#35782;&#21035;&#25104;&#28014;&#28857;&#25968;&#30340;&#37096;&#20998;&#36716;&#25442;&#25104;double&#22411;&#65292;&#30456;&#24403;&#20110;&#19979;&#38754;&#35201;&#35762;&#30340;
strtod(nptr, (char **) NULL);&#12290;&#23383;&#31526;&#20018;&#24320;&#22836;&#21487;&#20197;&#35782;&#21035;&#30340;&#28014;&#28857;&#25968;&#26684;&#24335;&#21644;C&#35821;&#35328;&#30340;&#28014;&#28857;&#25968;&#24120;
&#37327;&#30456;&#21516;&#65292;&#20363;&#22914;atof("31.4 ")&#30340;&#36820;&#22238;&#20540;&#26159;31.4&#65292;atof("3.14e+1AB")&#30340;&#36820;&#22238;&#20540;&#20063;&#26159;31.4&#12290;
atof&#20063;&#19981;&#33021;&#26816;&#26597;&#20986;&#38169;&#30340;&#24773;&#20917;&#65292;&#32780;strtod&#21487;&#20197;&#12290;

<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">  #include &lt;stdlib.h&gt;

  long int strtol(const char *nptr, char **endptr, int base);
  double strtod(const char *nptr, char **endptr);
  /* &#36820;&#22238;&#20540;&#65306;&#36716;&#25442;&#32467;&#26524;&#65292;&#20986;&#38169;&#26102;&#35774;&#32622;errno */
</span><span class="org-block-end-line">#+END_SRC
</span>strtol&#26159;atoi&#30340;&#22686;&#24378;&#29256;&#65292;&#20027;&#35201;&#20307;&#29616;&#22312;&#36825;&#20960;&#26041;&#38754;&#65306;

    + &#19981;&#20165;&#21487;&#20197;&#35782;&#21035;&#21313;&#36827;&#21046;&#25972;&#25968;&#65292;&#36824;&#21487;&#20197;&#35782;&#21035;&#20854;&#23427;&#36827;&#21046;&#30340;&#25972;&#25968;&#65292;&#21462;&#20915;&#20110;base&#21442;&#25968;&#65292;&#27604;&#22914;
      strtol("0XDEADbeE~~", NULL, 16)&#36820;&#22238;0xdeadbee&#30340;&#20540;&#65292;strtol("0777~~", NULL,
      8)&#36820;&#22238;0777&#30340;&#20540;&#12290;

    + endptr&#26159;&#19968;&#20010;&#20256;&#20986;&#21442;&#25968;&#65292;&#20989;&#25968;&#36820;&#22238;&#26102;&#25351;&#21521;&#21518;&#38754;&#26410;&#34987;&#35782;&#21035;&#30340;&#31532;&#19968;&#20010;&#23383;&#31526;&#12290;&#20363;&#22914;char
      *pos; strtol("123abc", &amp;pos, 10);&#65292;strtol&#36820;&#22238;123&#65292;pos&#25351;&#21521;&#23383;&#31526;&#20018;&#20013;&#30340;&#23383;&#27597;a&#12290;
      &#22914;&#26524;&#23383;&#31526;&#20018;&#24320;&#22836;&#27809;&#26377;&#21487;&#35782;&#21035;&#30340;&#25972;&#25968;&#65292;&#20363;&#22914;char *pos; strtol("ABCabc", &amp;pos,
      10);&#65292;&#21017;strtol&#36820;&#22238;0&#65292;pos&#25351;&#21521;&#23383;&#31526;&#20018;&#24320;&#22836;&#65292;&#21487;&#20197;&#25454;&#27492;&#21028;&#26029;&#36825;&#31181;&#20986;&#38169;&#30340;&#24773;&#20917;&#65292;&#32780;&#36825;
      &#26159;atoi&#22788;&#29702;&#19981;&#20102;&#30340;&#12290;

    + &#22914;&#26524;&#23383;&#31526;&#20018;&#20013;&#30340;&#25972;&#25968;&#20540;&#36229;&#20986;long int&#30340;&#34920;&#31034;&#33539;&#22260;&#65288;&#19978;&#28322;&#25110;&#19979;&#28322;&#65289;&#65292;&#21017;strtol&#36820;&#22238;&#23427;
      &#25152;&#33021;&#34920;&#31034;&#30340;&#26368;&#22823;&#65288;&#25110;&#26368;&#23567;&#65289;&#25972;&#25968;&#65292;&#24182;&#35774;&#32622;errno&#20026;ERANGE&#65292;&#20363;&#22914;
      strtol("0XDEADbeef~~", NULL, 16)&#36820;&#22238;0x7fffffff&#24182;&#35774;&#32622;errno&#20026;ERANGE&#12290;

&#22238;&#24819;&#19968;&#19979;&#20351;&#29992;fopen&#30340;&#22871;&#36335;
<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">if ( (fp = fopen(...)) == NULL) { &#35835;&#21462;errno }&#65292;
</span><span class="org-block-end-line">#+END_SRC
</span>fopen&#22312;&#20986;&#38169;&#26102;&#20250;&#36820;&#22238;NULL&#65292;&#22240;&#27492;&#25105;&#20204;&#30693;&#36947;&#38656;&#35201;&#35835;errno&#65292;&#20294;strtol&#22312;&#25104;&#21151;&#35843;&#29992;&#26102;&#20063;&#21487;&#33021;&#36820;
&#22238;0x7fffffff&#65292;&#25105;&#20204;&#22914;&#20309;&#30693;&#36947;&#38656;&#35201;&#35835;errno&#21602;&#65311;&#26368;&#20005;&#35880;&#30340;&#20570;&#27861;&#26159;&#39318;&#20808;&#25226;errno&#32622;0&#65292;&#20877;&#35843;&#29992;
strtol&#65292;&#20877;&#26597;&#30475;errno&#26159;&#21542;&#21464;&#25104;&#20102;&#38169;&#35823;&#30721;&#12290;Man Page&#19978;&#26377;&#19968;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#65306;
<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">  #include &lt;stdlib.h&gt;
  #include &lt;limits.h&gt;
  #include &lt;stdio.h&gt;
  #include &lt;errno.h&gt;

  int main(int argc, char *argv[])
  {
      int base;
      char *endptr, *str;
      long val;

      if (argc &lt; 2) {
          fprintf(stderr, "Usage: %s str [base]\n", argv[0]);
          exit(EXIT_FAILURE);
      }

      str = argv[1];
      base = (argc &gt; 2) ? atoi(argv[2]) : 10;

      errno = 0;    /* To distinguish success/failure after call */
      val = strtol(str, &amp;endptr, base);

      /* Check for various possible errors */

      if ((errno == ERANGE &amp;&amp; (val == LONG_MAX || val == LONG_MIN))
          || (errno != 0 &amp;&amp; val == 0)) {
          perror("strtol");
          exit(EXIT_FAILURE);
      }

      if (endptr == str) {
          fprintf(stderr, "No digits were found\n");
          exit(EXIT_FAILURE);
      }

      /* If we got here, strtol() successfully parsed a number */

      printf("strtol() returned %ld\n", val);

      if (*endptr != '\0')        /* Not necessarily an error... */
          printf("Further characters after number: %s\n", endptr);

      exit(EXIT_SUCCESS);
  }
</span><span class="org-block-end-line">#+END_SRC
</span></pre>
  </body>
</html>
