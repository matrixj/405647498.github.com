<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.34 in css mode. -->
<html>
  <head>
    <title>auto-insert-and-yasnippet.org</title>
    <style type="text/css">
    <!--
      body {
        color: #F8F8F8;
        background-color: #0C1021;
      }
      .comment {
        /* font-lock-comment-face */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block {
        /* org-block */
        color: #b3b3b3;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-size: 144%;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #FF6400;
      }
      .org-link {
        /* org-link */
        color: #00ffff;
        text-decoration: underline;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #AEAEAE;
        font-style: italic;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="comment"># -*- coding:utf-8 -*-</span>
<span class="org-meta-line">#+LANGUAGE:  zh
</span><span class="org-document-info-keyword">#+TITLE:</span><span class="comment">     </span><span class="org-document-title">yasnippet ,Auto Insert mode&#25972;&#21512;</span>
<span class="org-document-info-keyword">#+AUTHOR:</span><span class="comment">    </span><span class="org-document-info">&#23396;&#23792;&#29420;&#31168;</span>
<span class="org-document-info-keyword">#+EMAIL:</span><span class="comment">     </span><span class="org-document-info">jixiuf@gmail.com</span>
<span class="org-document-info-keyword">#+DATE:</span><span class="comment">      </span><span class="org-document-info">2011-06-03 &#26143;&#26399;&#20116;</span>
<span class="org-meta-line">#+FILETAGS: @Emacs @Linux @Windows
#+DESCRIPTION: Emacs &#23454;&#29616;auto insert &#26102;&#25972;&#21512;yasnippet &#30340;&#27169;&#29256;&#21151;&#33021;
#+KEYWORDS: Emacs yasnippet auto insert 
#+OPTIONS:   H:3 num:t toc:t \n:nil @:t ::t |:t ^:t -:t f:t *:t &lt;:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+EXPORT_SELECT_TAGS: Emacs 
#+EXPORT_EXCLUDE_TAGS: noexport
</span>
auto-insert &#26159;GNU/Emacs&#33258;&#24102;&#30340;&#19968;&#20010;&#21151;&#33021;&#65292;&#23427;&#21487;&#20197;&#23454;&#29616;&#24403;&#20320;&#26032;&#24314;&#19968;&#20010;&#25991;&#20214;&#30340;&#26102;&#20505;&#65292;&#33258;&#21160;
&#22312;&#36825;&#20010;&#26032;&#24314;&#30340;&#25991;&#20214;&#37324;&#25554;&#20837;&#30456;&#24212;&#30340;&#20869;&#23481;&#65292;&#27604;&#22914;&#20320;&#26032;&#24314;&#19968;&#20010;c&#28304;&#25991;&#20214;&#30340;&#26102;&#20505;&#23427;&#33258;&#21160;&#21152;&#20837;&#36825;&#26679;&#19968;
&#27573;&#20195;&#30721;&#65306;
<span class="org-level-1">* c&#27169;&#29256;&#20195;&#30721;1</span>
<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">#include &lt;stdio.h&gt;

int main(void){
  return 0;
}
</span><span class="org-block-end-line">#+END_SRC
</span>auto-insert &#20250;&#26681;&#25454;&#20320;&#25152;&#26032;&#24314;&#25991;&#20214;&#30340;&#21518;&#32512;&#21517;&#25110;major mode&#31181;&#31867;&#20915;&#23450;&#25554;&#20837;&#21738;&#20010;&#27169;&#29256;&#25991;&#20214;&#12290;&#35201;
&#23454;&#29616;&#19978;&#36848;&#21151;&#33021; &#65292;&#21482;&#38656;&#35201;&#22312;&#20320;Emacs&#30340;&#37197;&#32622;&#25991;&#20214;&#20013;&#21152;&#20837;&#20284;&#31867;&#22914;&#19979;&#30340;&#20195;&#30721;
<span class="org-level-1">* &#21551;&#29992;Auto Insert &#30340;&#37197;&#32622;&#20195;&#30721;</span>
<span class="org-block-begin-line">#+BEGIN_SRC emacs-lisp
</span><span class="org-block">;;&#39318;&#20808;&#36825;&#21477;&#35805;&#35774;&#32622;&#19968;&#20010;&#30446;&#24405;&#65292;&#20320;&#30340;auto-insert &#30340;&#27169;&#29256;&#25991;&#20214;&#20250;&#23384;&#25918;&#22312;&#36825;&#20010;&#30446;&#24405;&#20013;&#65292;
(setq-default auto-insert-directory "~/.emacs.d/auto-insert/")
(auto-insert-mode)  ;;; &#21551;&#29992;auto-insert
;; &#40664;&#35748;&#24773;&#20917;&#19979;&#25554;&#20837;&#27169;&#29256;&#21069;&#20250;&#24490;&#38382;&#20320;&#35201;&#19981;&#35201;&#33258;&#21160;&#25554;&#20837;&#65292;&#36825;&#37324;&#35774;&#32622;&#20026;&#19981;&#24517;&#35810;&#38382;&#65292;
;; &#22312;&#26032;&#24314;&#19968;&#20010;org&#25991;&#20214;&#26102;&#65292;&#33258;&#21160;&#25554;&#20837;`auto-insert-directory'&#30446;&#24405;&#19979;&#30340;`org-auto-insert`&#25991;&#20214;&#20013;&#30340;&#20869;&#23481;
(setq auto-insert-query nil) 
(define-auto-insert "\\.org" "org-auto-insert")
;;&#36825;&#20010;&#23601;&#26159;&#26032;&#24314;&#20197;.c &#32467;&#23614;&#30340;C&#25991;&#20214;&#26102;&#65292;&#20250;&#33258;&#21160;&#25554;&#20837;c-auto-insert&#25991;&#20214;&#20013;&#30340;&#20869;&#23481;
(define-auto-insert "\\.c" "c-auto-insert")
</span><span class="org-block-end-line">#+END_SRC
</span>&#19979;&#38754;&#35201;&#20570;&#22312;&#21482;&#38656;&#35201;&#22312;~/.emacs.d/auto-insert/c-auto-insert &#25991;&#20214;&#20013;&#25554;&#20837;&#19978;&#38754;&#25552;&#21040;&#30340;<span class="org-link">c&#27169;
&#29256;&#20195;&#30721;1</span>&#24314;&#22909;~/.emacs.d/auto-insert/c-auto-insert &#25991;&#20214;&#21518;&#65292;&#29992;Emacs&#26032;&#24314; &#19968;&#20010;c&#25991;
&#20214;&#65292;&#20320;&#23601;&#20250;&#21457;&#29616;&#20320;&#26032;&#24314;&#30340;&#25991;&#20214;&#20013;&#24050;&#32463;&#21253;&#21547;&#19978;&#38754;&#37027;&#27573;c&#20195;&#30721;&#29255;&#27573;&#20102;&#12290;&#25925;&#20107;&#24182;&#27809;&#26377;&#21040;&#27492;&#32467;&#26463; &#65292;
&#20889;&#21040;&#36825;&#37324;&#65292;&#36824;&#19968;&#30452;&#27809;yasnippet&#20160;&#20040;&#20107;&#21602;.&#20551;&#22914;&#25105;&#24819;&#22312;&#21019;&#24314;&#36825;&#20010;c&#25991;&#20214;&#30340;&#26102;&#20505;&#65292;&#22312;&#25991;&#20214;&#24320;&#22836;
&#25554;&#20837;&#25991;&#20214;&#21019;&#24314;&#30340;&#26102;&#38388;&#65292;&#20316;&#32773;&#30340;&#22995;&#21517;&#65292;&#21448;&#25110;&#32773;&#26159;&#36825;&#20010;&#21018;&#21018;&#21019;&#24314;&#30340;&#25991;&#20214;&#30340;&#21517;&#31216;&#65292;&#20854;&#26684;&#24335;&#22823;&#27010;&#22914;
&#19979;
<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">//file name : hellworld.c
//created at: 2011-11-11 11:11:11
//author: &#29233;&#35841;&#35841;

#include &lt;stdio.h&gt;

int main(void){
  return 0;
}
</span><span class="org-block-end-line">#+END_SRC
</span>&#36825;&#20010;&#20316;&#32773;&#22995;&#21517;&#25110;&#35768;&#20320;&#21487;&#20197;&#30828;&#32534;&#30721;&#21040;&#36825;&#20010;&#27169;&#29256;&#25991;&#20214;&#20013;&#65292;&#22240;&#20026;&#27605;&#31455;&#21482;&#26377;&#20320;&#33258;&#24049;&#22312;&#29992;&#20320;&#30340;Emacs
,&#21487;&#26159;&#36825;&#20010;&#21019;&#24314;&#26102;&#38388;&#65292;&#21450;&#25991;&#20214;&#21517;&#20320;&#23601;&#24456;&#38590;&#25226;&#23427;&#21150;&#21040;&#20102;&#65292;&#24403;&#28982;EmacsWiki&#19978;&#20171;&#32461;
<span class="org-link">AutoInSertMode&#30340;&#39029;&#38754;&#19978;&#26377;&#35299;&#20915;&#36825;&#20010;&#38382;&#39064;&#30340;&#21150;&#27861;</span> &#65292;&#20294;&#26159;&#23427;&#38024;&#23545;&#19978;&#38754;&#25552;&#21040;&#30340;&#27599;&#20010;&#38382;&#39064;&#37117;&#35201;
&#20889;&#19968;&#20010;elisp&#20989;&#25968;&#26469;&#23454;&#29616;&#20854;&#21151;&#33021;&#12290;&#24456;&#26126;&#26174;&#65292;&#26131;&#29992;&#24615;&#12289;&#25193;&#23637;&#24615;&#24046;&#20102;&#28857;&#12290;&#32780;&#35762;&#21040;&#27169;&#29256;&#21151;&#33021;&#65292;&#30456;
&#20449;&#22312;Emacs&#20013;&#21487;&#29992;&#30340;&#27169;&#29256;&#21151;&#33021;&#65292;&#30446;&#21069;&#21487;&#20197;&#35828;<span class="org-link">yasnippet</span> &#31639;&#24471;&#19978;&#26159;&#26368;&#24378;&#22823;&#30340;&#20102;&#12290;
&#23558;&#36825;&#20004;&#32773;&#32467;&#21512;&#26469;&#29992;&#65292;&#33258;&#28982;&#20877;&#21512;&#36866;&#19981;&#36807;&#20102;&#12290;
<span class="org-level-1">* &#23558;auto-insert-mode&#19982;yasnippet &#36827;&#34892;&#25972;&#21512;&#30340;&#20195;&#30721;</span>
<span class="org-block-begin-line">#+BEGIN_SRC emacs-lisp
</span><span class="org-block">(defadvice auto-insert  (around yasnippet-expand-after-auto-insert activate)
  "expand auto-inserted content as yasnippet templete,
  so that we could use yasnippet in autoinsert mode"
  (let ((is-new-file (and (not buffer-read-only)
                          (or (eq this-command 'auto-insert)
                              (and auto-insert (bobp) (eobp))))))
    ad-do-it
    (let ((old-point-max (point-max)))
      (when is-new-file
        (goto-char old-point-max)
        (yas/expand-snippet (buffer-substring-no-properties (point-min) (point-max)))
        (delete-region (point-min) old-point-max)
        )
      )
    )
  )
</span><span class="org-block-end-line">#+END_SRC
</span>&#23558;&#36825;&#27573;&#20195;&#30721;&#25918;&#21040;<span class="org-link">&#21551;&#29992;Auto Insert &#30340;&#37197;&#32622;&#20195;&#30721;</span> &#30340;&#21518;&#38754;&#65292;&#21363;&#21487;&#12290;&#28982;&#21518;c-auto-insert &#36825;&#20010;
&#25991;&#20214;&#37324;&#30340;&#20195;&#30721; &#23601;&#21487;&#20197;&#26159;yasnippet &#25903;&#25345;&#30340;&#27169;&#29256;&#25991;&#20214;&#30340;&#20195;&#30721;&#20102;,&#19978;&#38754;&#25552;&#21040;&#30340;&#21151;&#33021;&#65292;
&#21487;&#20197;&#36825;&#26679;&#23454;&#29616;
<span class="org-level-1">* Yasnippet &#26684;&#24335;&#30340;&#27169;&#29256; </span>
<span class="org-block-begin-line">#+BEGIN_SRC c
</span><span class="org-block">//file name : `(buffer-name)`
//created at: `(format-time-string "%c")`
//author:  `user-full-name`

#include &lt;stdio.h&gt;

int main(void){
  return 0;
}
</span><span class="org-block-end-line">#+END_SRC
</span></pre>
  </body>
</html>
