<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.34 in css mode. -->
<html>
  <head>
    <title>emacs-kill-region-or-line.org</title>
    <style type="text/css">
    <!--
      body {
        color: #F8F8F8;
        background-color: #0C1021;
      }
      .comment {
        /* font-lock-comment-face */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block {
        /* org-block */
        color: #b3b3b3;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #AEAEAE;
        font-style: italic;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-size: 144%;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #FF6400;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #AEAEAE;
        font-style: italic;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="comment"># -*- coding:utf-8 -*-</span>
<span class="org-meta-line">#+LANGUAGE:  zh
</span><span class="org-document-info-keyword">#+TITLE:</span><span class="comment">     </span><span class="org-document-title">Emacs&#20013;&#30340;&#21098;&#20999;&#22797;&#21046;</span>
<span class="org-document-info-keyword">#+AUTHOR:</span><span class="comment">    </span><span class="org-document-info">&#23396;&#23792;&#29420;&#31168;</span>
<span class="org-document-info-keyword">#+EMAIL:</span><span class="comment">     </span><span class="org-document-info">jixiuf@gmail.com</span>
<span class="org-document-info-keyword">#+DATE:</span><span class="comment">     </span><span class="org-document-info">2011-07-04 &#19968;</span>
<span class="org-meta-line">#+DESCRIPTION:emacs-kill-region-or-line.org
#+KEYWORDS: emacs kill region line
#+OPTIONS:   H:2 num:nil toc:t \n:t @:t ::t |:t ^:t -:t f:t *:t &lt;:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport
#+FILETAGS: @Emacs 
</span><span class="org-level-1">* kill-line kill-region</span>
C-k : kill-line
C-w : kill-region
&#27880;&#24847;C-k &#30340;&#21151;&#33021;&#24182;&#19981;&#26159;&#21098;&#20999;&#24403;&#21069;&#34892;&#65292;&#32780;&#26159;&#21098;&#20999;&#24403;&#21069;&#34892;&#20174;&#20809;&#26631;&#21040;&#34892;&#26411;&#30340;&#20869;&#23481;&#12290;&#19981;&#35201;&#23581;&#35797;
&#20889;&#19968;&#20010;&#21098;&#20999;&#25972;&#34892;&#30340;&#20989;&#25968;&#20102;&#65292;&#22240;&#20026;&#23454;&#22312;&#27809;&#26377;&#24517;&#35201;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#35201;&#24819;&#21098;&#20999;&#25972;&#34892;&#65292;&#21482;&#38656;&#20809;
&#26631;&#36339;&#36716;&#21040;&#34892;&#39318;&#65292;&#28982;&#21518;C-k&#23601;&#21487;&#20197;&#20102;&#12290;&#21363;C-aC-k &#65292;&#36825;&#20010;&#25353;&#38190;&#24182;&#19981;&#38590;&#25353;&#12290;
&#21478;&#22806;&#26377;&#20010;&#23646;&#24615;  kill-whole-line&#65292;&#23427;&#26469;&#25511;&#21046;&#22312;&#34892;&#39318;C-k &#26102;&#65292;&#26159;&#21542;&#21516;&#26102;&#21024;&#38500;&#26411;&#23614;&#25442;&#34892;&#31526;
&#21478;&#22806;C-u0C-k &#36825;&#20010;&#25805;&#20316;&#26159;&#21024;&#38500;&#20174;&#20809;&#26631;&#21040;&#34892;&#39318;&#30340;&#20301;&#32622;&#20043;&#38388;&#30340;&#20869;&#23481;&#65292;&#36825;&#20010;&#25353;&#38190;&#26377;&#28857;&#38271;&#65292;&#20294;
&#25105;&#24182;&#19981;&#24120;&#29992;&#65292;&#23601;&#27809;&#37325;&#26032;&#36827;&#34892;&#32465;&#23450;&#12290;
<span class="org-block-begin-line">#+begin_src emacs-lisp
</span><span class="org-block">(setq-default kill-whole-line t) ;;
</span><span class="org-block-end-line">#+end_src
</span><span class="org-level-1">* joseph-kill-region-or-line&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;&#30465;&#19979;C-w </span>
C-k &#30340;&#21151;&#33021;&#24050;&#32463;&#22815;&#24378;&#22823;&#20102;&#21543;&#12290;&#20294;&#26159;&#25105;&#36824;&#24819;&#20570;&#20010;&#21151;&#33021;&#22686;&#24378;&#12290;&#21363;&#24403;&#36873;&#20013;&#26576;&#21306;&#22495;&#30340;&#26102;&#20505;&#65292;&#21017;
kill-region,&#21542;&#21017;&#25165;&#25191;&#34892;&#40664;&#35748;&#30340;C-k&#30340;&#21151;&#33021;&#12290;&#23454;&#29616;&#36215;&#26469;&#65292;&#24456;&#31616;&#21333;&#65292;&#21482;&#38656;&#35201;&#21028;&#26029;
mark-active &#23646;&#24615;&#26159;&#21542;&#20026;true&#23601;&#21487;&#20197;&#20102;&#12290;&#25152;&#20197;&#26377;&#20102;&#19979;&#38754;&#30340;
joseph-kill-region-or-line&#12290;&#36825;&#26679;&#23601;&#21487;&#20197;&#30465;&#19979;C-w &#36825;&#20010;&#25353;&#38190;&#36827;&#34892;&#20854;&#20182;&#32465;&#23450;&#20102;&#12290;
<span class="org-block-begin-line">#+begin_src  emacs-lisp
</span><span class="org-block">;;&#25105;&#20889;&#30340;&#19968;&#20010;&#20989;&#25968;,&#22914;&#26524;&#26377;&#36873;&#20013;&#21306;&#22495;,&#21017;kill&#36873;&#21306;,&#21542;&#21017;&#21024;&#38500;&#24403;&#21069;&#34892;
;;&#27880;&#24847;&#24403;&#21069;&#34892;&#24182;&#19981;&#20195;&#34920;&#25972;&#34892;,&#23427;&#21482;&#21024;&#38500;&#20809;&#26631;&#21040;&#34892;&#23614;&#30340;&#20869;&#23481;,&#20063;&#23601;&#26159;&#40664;&#35748;&#24773;&#20917;&#19979;
;;C-k &#25152;&#20855;&#26377;&#30340;&#21151;&#33021;
;;;###autoload
(defun joseph-kill-region-or-line(&amp;optional arg)
  "this function is a wrapper of (kill-line).
   When called interactively with no active region, this function
  will call (kill-line) ,else kill the region."
  (interactive "P")
  (if mark-active
      (if (= (region-beginning) (region-end) ) (kill-line arg)
        (kill-region (region-beginning) (region-end) )
        )
    (kill-line arg)
    )
  )
</span><span class="org-block-end-line">#+end_src
</span><span class="org-level-1">* &#36825;&#20010;&#26159;org-mode &#19979;&#30340;&#29256;&#26412;&#12290;joseph-kill-region-or-org-kill-line</span>
<span class="org-block-begin-line">#+begin_src  emacs-lisp
</span><span class="org-block">(defun joseph-kill-region-or-org-kill-line(&amp;optional arg)
  "this function is a wrapper of (kill-line).
   When called interactively with no active region, this function
  will call (kill-line) ,else kill the region."
  (interactive "P")
  (if mark-active
      (if (= (region-beginning) (region-end) ) (org-kill-line arg)
        (kill-region (region-beginning) (region-end) )
        )
    (org-kill-line arg)
    )
  )
</span><span class="org-block-end-line">#+end_src
</span><span class="org-level-1">* &#21478;&#22806;&#20877;&#35828;&#19968;&#35828;Emacs&#20013;&#30340;&#21098;&#20999;&#22797;&#21046;&#12290;</span>
Emacs &#20013;&#30340;&#21098;&#20999;&#19981;&#21483;&#21098;&#20999;&#65288;cut&#65289;&#65292;&#21483;kill
&#22797;&#21046;(copy)&#19981;&#21483;copy ,&#21483;kill-ring-save &#65288;&#36825;&#20010;&#21487;&#20197;&#29702;&#35299;&#20026;&#20808;kill&#25481;&#25918;&#21040;kill-ring
&#37324;&#65292;&#28982;&#21518;&#20877;&#25226;&#23427;save&#22238;&#26469;&#65289;. 
&#21478;&#22806;&#36824;&#26377;&#19968;&#20010;&#25805;&#20316;&#21483;delete ,delete &#19982;kill&#30340;&#21306;&#21035;&#26159;kill&#25481;&#30340;&#20869;&#23481;&#20250;&#34987;&#25918;&#21040;
kill-ring(&#21098;&#20999;&#29615;)&#32780;delete&#25481;&#30340;&#20869;&#23481;&#21017;&#30452;&#25509;&#21024;&#25481;&#20102;&#65292;&#38500;&#20102;&#36827;&#34892;undo&#25805;&#20316;&#22806;&#27809;&#27861;&#25214;&#22238;&#21024;
&#25481;&#30340;&#20869;&#23481;&#12290;&#32780;kill &#25481;&#30340;&#20869;&#23481;&#24456;&#23481;&#26131;&#20174;kill-ring&#20013;&#21462;&#22238;&#12290;&#26377;&#20102;kill-ring&#30340;Emacs&#21487;&#20197;
&#35828;&#26159;&#20855;&#26377;&#20102;&#22810;&#20010;&#21098;&#36148;&#26495;&#12290;
&#35828;&#19968;&#35828;&#40664;&#35748;&#30340;&#19982;kill yank delete &#26377;&#20851;&#30340;&#38190;&#32465;&#23450;
+ C-w kill-region
+ C-k kill-line
+ C-M-k kill-sexp &#36825;&#20010;&#27604;&#36739;&#22797;&#26434; &#23427;&#34920;&#31034;&#21024;&#38500;&#19968;&#20010;&#32467;&#26500;&#21333;&#20803;&#12290;&#23545;&#19981;&#21516;&#31867;&#22411;&#30340;&#25991;&#26723;&#65288;c java
  &#25991;&#26412; &#31561;&#65289;&#19968;&#20010;&#32467;&#26500;&#21333;&#20803;&#34920;&#31034;&#19981;&#21516;&#30340;&#21547;&#20041;&#12290;&#20320;&#21487;&#20197;&#23581;&#35797;&#19968;&#19979;&#12290;(&#27604;&#22914;&#65292;&#20320;&#31227;&#21160;&#21040;&#19968;&#20010;
  &#25324;&#21495;&#30340;&#24320;&#22836;&#65292;&#25353;&#19979;&#65292;&#21017;&#21024;&#38500;&#25972;&#20010;&#25324;&#21495;&#20869;&#30340;&#20869;&#23481;)
+ C-d  delete-char
+ M-d  kill-word
+ C-backspace backward-kill-word

+ M-w kill-ring-save &#22797;&#21046;&#12290;
+ C-y yank &#31896;&#36148;&#12290;
+ &#21478;&#22806;&#22312;&#25353;&#19979;C-y&#21518;&#65292;&#25353;&#19968;&#27425;&#25110;&#22810;&#27425;M-y &#20250;&#24490;&#29615;&#21462;&#20986;kill-ring&#20013;&#30340;&#20869;&#23481;&#65292;&#28982;&#21518;&#36148;&#21040;&#24403;
  &#21069;&#20301;&#32622; &#12290;
  
+ &#20294;&#26159;kill-ring&#27605;&#31455;&#19981;&#26159;&#25805;&#20316;&#31995;&#32479;&#30340;&#21098;&#20999;&#26495;&#65292;kill-ring&#37324;&#30340;&#20869;&#23481;&#26159;&#27809;&#27861;&#22312;&#20854;&#20182;&#31243;&#24207;
  &#37324;&#21033;&#29992;&#30340;&#12290;&#25152;&#20197;&#35201;&#29992;&#22909;&#23427;&#21448;&#35774;&#21450;&#21040;&#19982;&#31995;&#32479;&#21098;&#20999;&#26495;&#30340;&#21516;&#27493;&#30340;&#38382;&#39064;&#20102;&#12290; &#22312;Windows &#19978;
  Emacs&#24050;&#32463;&#40664;&#35748;&#35299;&#20915;&#20102;&#36825;&#20010;&#38382;&#39064;&#12290;&#22312;Linux&#19978;&#27809;&#26377;&#12290;&#22240;&#20026;Linux&#30340;&#21098;&#20999;&#26495;&#19981;&#21482;&#19968;&#20010;&#12290;&#25152;
  &#20197;&#38382;&#39064;&#35201;&#22797;&#26434;&#35768;&#22810;&#12290;
<span class="org-level-1">* Linux &#19979; &#19982;&#31995;&#32479;&#31995;&#32479;&#21098;&#20999;&#26495;&#30456;&#20851;&#30340;&#25805;&#20316;&#12290;</span>
<span class="org-block-begin-line">#+begin_src emacs-lisp
</span><span class="org-block">;;&#20851;&#20110;&#21098;&#20999;&#26495;: X&#20849;&#20139;&#20449;&#24687;&#30340;&#26377; clipboard primary secondary &#19977;&#20010;&#21306;&#22495;
;;&#20854;&#20013;clipboard &#23601;&#26159;&#25105;&#20204;&#24120;&#35828;&#30340;&#21098;&#20999;&#26495;,&#32780;primary &#23601;&#26159;&#24120;&#35828;&#30340;selection ,&#20063;&#23601;&#26159;&#35828;&#21482;&#35201;&#20320;&#36873;&#20013;&#19968;&#27573;&#20869;&#23481;,
;;&#37027;&#20040;&#36825;&#27573;&#20869;&#23481;&#23601;&#34987;&#23384;&#21040;primary &#20013;&#20102;,&#32780;secondary &#30446;&#21069;&#22909;&#20687;&#24050;&#32463;&#19981;&#25512;&#33616;&#20351;&#29992;&#20102;,&#25152;&#20197;&#19981;&#29992;&#32771;&#34385;
;;&#32780;emacs &#40664;&#35748;&#23384;&#22312;&#20869;&#23481;&#30340;&#21306;&#22495;&#19981;&#26159;&#19978;&#38754;&#20219;&#20309;&#19968;&#20010;,&#23427;&#21483;kill-ring&#21483;&#21098;&#20999;&#29615;,&#23427;&#33021;&#23384;&#20648;&#19981;&#21482;&#19968;&#20221;&#20869;&#23481;,
;;C-y &#20250;&#21462;&#20986;kill-ring &#20013;&#26368;&#36817;&#30340;&#19968;&#20221;&#20869;&#23481;,&#28982;&#21518;paste(&#19987;&#19994;&#28857;&#21483;yank)&#21040;buffer &#20013;,&#21487;&#20197;&#36890;&#36807;M-y
;;&#21462;&#24471;&#20197;&#21069;&#30340;&#29256;&#26412;

(defun setting-for-linux-x-clipboard (&amp;optional frame)
  (when (and (eq system-type 'gnu/linux)(eq (window-system frame) 'x))
    ;;&#22312;&#21521;kill-ring &#21152;&#20837;&#20869;&#23481;&#30340;&#21516;&#26102;&#20250;&#25191;&#34892;interprogram-cut-function &#21464;&#37327;&#25351;&#23450;&#30340;&#20989;&#25968;
    (setq-default interprogram-cut-function 'x-select-text);; default
    ;;&#22312;&#25191;&#34892;yank &#25805;&#20316;&#26102;,&#20250;&#26816;&#26597;interprogram-paste-function &#21464;&#37327; &#25152;&#25351;&#21521;&#30340;&#20989;&#25968;
    ;;&#26159;&#21542;&#26377;&#36820;&#22238;&#20540;,&#22914;&#26524;&#26377;&#30340;&#35805;&#23601;&#23558;&#20854;yank&#22312;buffer &#20013;,&#21542;&#21017;&#30340;&#35805;&#25165;&#20250;&#20174;kill-ring&#20013;&#21462;&#20540;
    ;;&#32780;x-cut-buffer-or-selection-value  &#21644;x-select-text&#20989;&#25968;&#19968;&#26679;,
    ;;&#20063;&#20250;&#26681;&#25454;x-select-enable-clipboard &#21644;x-select-enable-primary &#30340;&#20540;
    ;;&#20915;&#23450;&#26159;&#21542;&#20174;clipboard &#21644;primary &#20013;&#21462;&#24471;&#20869;&#23481;
    (setq-default interprogram-paste-function 'x-cut-buffer-or-selection-value)
    ;;&#26377;&#20851;&#20110;&#24448;kill-ring&#21152;&#20837;&#20869;&#23481;&#26102; &#26159;&#21542;&#24448;clipboard ,&#21450;primary &#25918;&#20837;&#30340;&#21028;&#26029;
    (setq-default x-select-enable-clipboard t) ;&#27599;&#19968;&#27425;&#24448;kill-ring &#37324;&#21152;&#20837;&#19996;&#35199;&#26102;,&#21516;&#26102;&#24448;clipboard&#20013;&#25918;&#19968;&#20221;,
    (setq-default x-select-enable-primary  nil) ;&#27599;&#19968;&#27425;&#24448;kill-ring &#37324;&#21152;&#20837;&#19996;&#35199;&#26102;,&#26159;&#21542;&#20063;&#24448;primary &#20013;&#25918;&#20837;
    (setq-default select-active-regions  t);&#36825;&#20010;&#24536;&#20102;&#20160;&#20040;&#24847;&#24605;
    ;;&#22312;&#36718;&#35810;kill-ring &#30340;&#26102;&#20505;&#26159;&#21542;&#20063;&#21516;&#27493;&#25913;&#21464;&#31995;&#32479;&#30340;clipboard primary
    ;;(&#35201;&#26681;&#25454;x-select-enable-clipboard ,&#21450;x-select-enable-primary&#30340;&#20540;&#20915;&#23450;&#21738;&#20010;&#20250;&#34987;&#25913;&#21464;)
    (setq-default yank-pop-change-selection t)  ;
    ;;Save clipboard strings into kill ring before replacing them
    (setq-default save-interprogram-paste-before-kill t)

    ;; make mouse middle-click only paste from primary X11 selection, not clipboard and kill ring.
    ;;&#40736;&#26631;&#20013;&#38190;&#31896;&#36148;,&#21482;&#32771;&#34385;X11&#20013;&#30340;selection ,&#19981;&#32771;&#34385;clipboard &#21644;emacs &#20013;&#30340;kill-ring
    (global-set-key [mouse-2] 'mouse-yank-primary)
    ;;&#20854;&#23454;&#26377;&#20102;&#20197;&#19978;&#20960;&#20010;&#37197;&#32622; &#19979;&#38754;&#36825;&#19977;&#20010;&#38190;&#23436;&#20840;&#27809;&#26377;&#24517;&#35201;,&#20294;&#20026;&#38450;&#19975;&#19968;,
    ;;&#23558;&#19982;&#21098;&#20999;&#26495;&#30456;&#20851;&#30340;&#19977;&#20010;&#25805;&#20316;&#32465;&#21040;&#36825;&#19977;&#20010;&#19981;&#24120;&#29992;&#30340;&#38190;&#19978;.
    (global-set-key [(shift delete)] 'clipboard-kill-region)
    (global-set-key [(control insert)] 'clipboard-kill-ring-save)
    (global-set-key [(shift insert)] 'clipboard-yank)
    )
  )
</span><span class="org-block-end-line">#+end_src
</span></pre>
  </body>
</html>
