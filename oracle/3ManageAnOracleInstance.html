
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh" xml:lang="zh">
<head>
<title>3.ManageAnOracleInstance.org</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="3.ManageAnOracleInstance.org"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2011-07-09 六"/>
<meta name="author" content="孤峰独秀"/>
<meta name="description" content="3ManageAnOracleInstance.org"/>
<meta name="keywords" content="oracle linux "/>
<style type='text/css'>
       body {
    background-color: #E5E5E5;
	scrollbar-face-color: #DEE3E7;
	scrollbar-highlight-color: #FFFFFF;
	scrollbar-shadow-color: #DEE3E7;
	scrollbar-3dlight-color: #D1D7DC;
	scrollbar-arrow-color:  #006699;
	scrollbar-track-color: #EFEFEF;
	scrollbar-darkshadow-color: #98AAB1;
    /* background-color: #999966;  */
    margin: 0em;
}

h1 {
    font-size: 2.0em;
    margin-top: 1.0em;
    margin-bottom: 0.3em;
}
h2 {
    font-size: 1.5em;
    margin-top: 2.4em;
    margin-bottom: 0.3em;
}
h3 {
    font-size: 1.25em;
    margin-top: 1.25em;
    margin-bottom: 0.3em;
}


div#content {
    font-family: Times, serif;
    border-left: double #333300 3mm;
    border-right: double #333300 3mm;
    letter-spacing: 0.075em;
    line-height: 1.4;
    margin: 0em auto;
    padding: 2em;
    width: 92%;
    height:100%; 
    min-height:600px;           /*firefox do'nt support height:100% ,so*/
 
}
/* #table-of-contents { */
/* 	font-size: 75%; */
/* 	line-height: 1.4em; */
/* 	position: fixed; */
/* 	display: block; */
/* 	left: -20px; */
/* 	top: 5%; */
/* 	width: 250px; */
/* 	min-height:60px; */
/* 	max-height:95%; */
/* 	overflow:hidden; */
/*     white-space:nowrap; */
/* } */

#org-div-home-and-up{
	position: fixed;
	display: block;
	right: 18px;
	top: 5px;
	overflow:auto;
    }
#org-src{
	position: fixed;
	display: block;
	right: 18px;
	top: 20px;
	overflow:hidden;
    }
#htmlized-src{
	position: fixed;
	display: block;
	right: 54px;
	top: 20px;
	overflow:hidden;
    }
#table-of-contents h2 {
	display:none;
}

#logo-text{
	position: fixed;
	display: block;
	right: 16px;
	bottom: 3px;
	overflow:hidden;
}
#logo-img{
    font-size: 60%;
	position: fixed;
	display: block;
    left: 16px;
	top: 3px;
    }
div#tags {
	font-size: 75%;
    text-align:right;
	/* line-height: 1.4em; */
	position: fixed;
	display: block;
	right: 40px;
	top: 20%;
	width: 90px;
	/* min-height:60px; */
	max-height:95%;
	/* overflow:visible; */
    /* white-space:pre-wrap; */
}

.title {
    text-align:center;
	padding-bottom: 7px;
	margin-bottom: 20px;
	border-bottom: 1px solid #222;
}
 a:link,a:active,a:visited { color : #006699; } 
 a:hover		{ text-decoration: underline; color : #DD6900; } 

.todo {color: #990000;}
.done {color: #006666;}
.timestamp-kwd {color: #444;}
.tag {color: #DDD; font-size: 70%; font-weight: 500;}

table {border: none;
       width:90%;
      }
th	{
	background-color: #006699; 
}
td	{
    padding: .1em .7em .1em .3em;
	background-color: Gainsboro
}


code {
font-family: Andale Mono, Courier New, Courier, sans-serif; font-size: 12px; line-height: 14px; color: #0000A0;
	background-color: #FAFAFA; border: #D1D7DC; border-style: solid;
	border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px
}

/* pre { */
/* 	border: 1px solid #555; */
/* 	background: #EEEEEE; */
/* 	font-size: 9pt; */
/* 	padding: 1em; */
/* } */
pre.src {
	border: 1px solid #555;
	background:#0c1021;
    /* background:#263111; */
    color: #f7f8c6;
	font-size: 10pt;
    width:85%;
	padding: 0em;
	margin: 0;
	width: 700px;
	float: none;
	clear: none;
	line-height: 1.333;
	text-align:left;
    
    /* overflow: scroll; */
    max-height:500px;           /*IEXPLORE  don't support max-height*/
    _height:expression(this.scrollHeight > 300 ? "300px" : "auto");
    min-height:50px;
    max-width:700px;
    min-width:700px;
    overflow-x:auto;
    overflow-y:auto;
}
blockquote {
	 border: #D1D7DC;
     border-style: solid;
	border-left-width: 1px;
    border-top-width: 1px;
    border-right-width: 1px;
    border-bottom-width: 1px
    
    color: #444444;
    line-height: 125%;
	border: 1px solid #555;
    background-color: #FAFAFA;    
    width:95%;
	padding: 1em;
	margin: 0;
	float: none;
	clear: none;
	text-align:left;
    font-style:italic;
    
    /* overflow: scroll; */
    max-height:300px;           /*IEXPLORE  don't support max-height*/
    _height:expression(this.scrollHeight > 300 ? "300px" : "auto");
    min-height:20px;
    max-width:700px;
    min-width:700px;
    overflow-x:auto;
    overflow-y:auto;
}

.org-function-name {
    /* font-lock-function-name-face */
    /* color: #0000ff; */
     color: #87cefa;
     font-stretch: normal;
     text-decoration: none;
}

.org-keyword {
    /* font-lock-keyword-face */
    color: #00ffff;
    text-decoration: none;
    /* color: #a020f0; */
}
.org-doc
 { color: #ffa07a;
   text-decoration: none;
 }
p.author{
    font-size:80%;
    color:#556b2f;
    font-style:italic;
    position:fixed;
    left:10px;
    bottom:40px;
}
p.date{
    font-size:80%;
    color:#556b2f;
    font-style:italic;
    position:fixed;
    left:10px;
    bottom:0px;
}
p.creator{
    font-size:80%;
    color:#556b2f;
    font-style:italic;
    position:fixed;
    left:10px;
    bottom:20px;
}

img {
    display:inline;
	border: none;
    float:none;
    clear:none;
    left:10px;
}

.share img {
	opacity: .4;
	-moz-opacity: .4;
	filter: alpha(opacity=40);
}

.share img:hover {
	opacity: 1;
	-moz-opacity: 1;
	filter: alpha(opacity=100);
}

.org-info-search-highlight
{
	background-color:#adefef; /* same color as emacs default */
	color:#000000;
	font-weight:bold;
}

.org-bbdb-company {
    /* bbdb-company */
    font-style: italic;
}
.org-bbdb-field-name {
}
.org-bbdb-field-value {
}
.org-bbdb-name {
    /* bbdb-name */
    text-decoration: underline;
}
.org-bold {
    /* bold */
    font-weight: bold;
}
.org-bold-italic {
    /* bold-italic */
    font-weight: bold;
    font-style: italic;
}
.org-border {
    /* border */
    background-color: #000000;
}
.org-buffer-menu-buffer {
    /* buffer-menu-buffer */
    font-weight: bold;
}
.org-builtin {
    /* font-lock-builtin-face */
    color: #da70d6;
}
.org-button {
    /* button */
    text-decoration: underline;
}
.org-c-nonbreakable-space {
    /* c-nonbreakable-space-face */
    background-color: #ff0000;
    font-weight: bold;
}
.org-calendar-today {
    /* calendar-today */
    text-decoration: underline;
}
.org-comment {
    /* font-lock-comment-face */
    color: #b22222;
}
.org-comment-delimiter {
    /* font-lock-comment-delimiter-face */
    color: #b22222;
}
.org-constant {
    /* font-lock-constant-face */
    color: #5f9ea0;
}
.org-cursor {
    /* cursor */
    background-color: #000000;
}
.org-default {
    /* default */
    color: #000000;
    background-color: #ffffff;
}
.org-diary {
    /* diary */
    color: #ff0000;
}
.org-escape-glyph {
    /* escape-glyph */
    color: #a52a2a;
}
.org-file-name-shadow {
    /* file-name-shadow */
    color: #7f7f7f;
}
.org-fixed-pitch {
}
.org-fringe {
    /* fringe */
    background-color: #f2f2f2;
}
.org-header-line {
    /* header-line */
    color: #333333;
    background-color: #e5e5e5;
}
.org-help-argument-name {
    /* help-argument-name */
    font-style: italic;
}
.org-highlight {
    /* highlight */
    background-color: #b4eeb4;
}
.org-holiday {
    /* holiday */
    background-color: #ffc0cb;
}
.org-info-header-node {
    /* info-header-node */
    color: #a52a2a;
    font-weight: bold;
    font-style: italic;
}
.org-info-header-xref {
    /* info-header-xref */
    color: #0000ff;
    text-decoration: underline;
}
.org-info-menu-header {
    /* info-menu-header */
    font-weight: bold;
}
.org-info-menu-star {
    /* info-menu-star */
    color: #ff0000;
}
.org-info-node {
    /* info-node */
    color: #a52a2a;
    font-weight: bold;
    font-style: italic;
}
.org-info-title-1 {
    /* info-title-1 */
    font-size: 172%;
    font-weight: bold;
}
.org-info-title-2 {
    /* info-title-2 */
    font-size: 144%;
    font-weight: bold;
}
.org-info-title-3 {
    /* info-title-3 */
    font-size: 120%;
    font-weight: bold;
}
.org-info-title-4 {
    /* info-title-4 */
    font-weight: bold;
}
.org-info-xref {
    /* info-xref */
    color: #0000ff;
    text-decoration: underline;
}
.org-isearch {
    /* isearch */
    color: #b0e2ff;
    background-color: #cd00cd;
}
.org-italic {
    /* italic */
    font-style: italic;
}
.org-lazy-highlight {
    /* lazy-highlight */
    background-color: #afeeee;
}
.org-link {
    /* link */
    color: #0000ff;
    text-decoration: underline;
}
.org-link-visited {
    /* link-visited */
    color: #8b008b;
    text-decoration: underline;
}
.org-match {
    /* match */
    background-color: #ffff00;
}
.org-menu {
}
.org-message-cited-text {
    /* message-cited-text */
    color: #ff0000;
}
.org-message-header-cc {
    /* message-header-cc */
    color: #191970;
}
.org-message-header-name {
    /* message-header-name */
    color: #6495ed;
}
.org-message-header-newsgroups {
    /* message-header-newsgroups */
    color: #00008b;
    font-weight: bold;
    font-style: italic;
}
.org-message-header-other {
    /* message-header-other */
    color: #4682b4;
}
.org-message-header-subject {
    /* message-header-subject */
    color: #000080;
    font-weight: bold;
}
.org-message-header-to {
    /* message-header-to */
    color: #191970;
    font-weight: bold;
}
.org-message-header-xheader {
    /* message-header-xheader */
    color: #0000ff;
}
.org-message-mml {
    /* message-mml */
    color: #228b22;
}
.org-message-separator {
    /* message-separator */
    color: #a52a2a;
}
.org-minibuffer-prompt {
    /* minibuffer-prompt */
    color: #0000cd;
}
.org-mm-uu-extract {
    /* mm-uu-extract */
    color: #006400;
    background-color: #ffffe0;
}
.org-mode-line {
    /* mode-line */
    color: #000000;
    background-color: #bfbfbf;
}
.org-mode-line-buffer-id {
    /* mode-line-buffer-id */
    font-weight: bold;
}
.org-mode-line-highlight {
}
.org-mode-line-inactive {
    /* mode-line-inactive */
    color: #333333;
    background-color: #e5e5e5;
}
.org-mouse {
    /* mouse */
    background-color: #000000;
}
.org-negation-char {
}
.org-next-error {
    /* next-error */
    background-color: #eedc82;
}
.org-nobreak-space {
    /* nobreak-space */
    color: #a52a2a;
    text-decoration: underline;
}
.org-org-agenda-date {
    /* org-agenda-date */
    color: #0000ff;
}
.org-org-agenda-date-weekend {
    /* org-agenda-date-weekend */
    color: #0000ff;
    font-weight: bold;
}
.org-org-agenda-restriction-lock {
    /* org-agenda-restriction-lock */
    background-color: #ffff00;
}
.org-org-agenda-structure {
    /* org-agenda-structure */
    color: #0000ff;
}
.org-org-archived {
    /* org-archived */
    color: #7f7f7f;
}
.org-org-code {
    /* org-code */
    color: #7f7f7f;
}
.org-org-column {
    /* org-column */
    background-color: #e5e5e5;
}
.org-org-column-title {
    /* org-column-title */
    background-color: #e5e5e5;
    font-weight: bold;
    text-decoration: underline;
}
.org-org-date {
    /* org-date */
    color: #a020f0;
    text-decoration: underline;
}
.org-org-done {
    /* org-done */
    color: #228b22;
    font-weight: bold;
}
.org-org-drawer {
    /* org-drawer */
    color: #0000ff;
}
.org-org-ellipsis {
    /* org-ellipsis */
    color: #b8860b;
    text-decoration: underline;
}
.org-org-formula {
    /* org-formula */
    color: #b22222;
}
.org-org-headline-done {
    /* org-headline-done */
    color: #bc8f8f;
}
.org-org-hide {
    /* org-hide */
    color: #e5e5e5;
}
.org-org-latex-and-export-specials {
    /* org-latex-and-export-specials */
    color: #8b4513;
}
.org-org-level-1 {
    /* org-level-1 */
    color: #0000ff;
}
.org-org-level-2 {
    /* org-level-2 */
    color: #b8860b;
}
.org-org-level-3 {
    /* org-level-3 */
    color: #a020f0;
}
.org-org-level-4 {
    /* org-level-4 */
    color: #b22222;
}
.org-org-level-5 {
    /* org-level-5 */
    color: #228b22;
}
.org-org-level-6 {
    /* org-level-6 */
    color: #5f9ea0;
}
.org-org-level-7 {
    /* org-level-7 */
    color: #da70d6;
}
.org-org-level-8 {
    /* org-level-8 */
    color: #bc8f8f;
}
.org-org-link {
    /* org-link */
    color: #a020f0;
    text-decoration: underline;
}
.org-org-property-value {
}
.org-org-scheduled-previously {
    /* org-scheduled-previously */
    color: #b22222;
}
.org-org-scheduled-today {
    /* org-scheduled-today */
    color: #006400;
}
.org-org-sexp-date {
    /* org-sexp-date */
    color: #a020f0;
}
.org-org-special-keyword {
    /* org-special-keyword */
    color: #bc8f8f;
}
.org-org-table {
    /* org-table */
    color: #0000ff;
}
.org-org-tag {
    /* org-tag */
    font-weight: bold;
}
.org-org-target {
    /* org-target */
    text-decoration: underline;
}
.org-org-time-grid {
    /* org-time-grid */
    color: #b8860b;
}
.org-org-todo {
    /* org-todo */
    color: #ff0000;
}
.org-org-upcoming-deadline {
    /* org-upcoming-deadline */
    color: #b22222;
}
.org-org-verbatim {
    /* org-verbatim */
    color: #7f7f7f;
    text-decoration: underline;
}
.org-org-warning {
    /* org-warning */
    color: #ff0000;
    font-weight: bold;
}
.org-outline-1 {
    /* outline-1 */
    color: #0000ff;
}
.org-outline-2 {
    /* outline-2 */
    color: #b8860b;
}
.org-outline-3 {
    /* outline-3 */
    color: #a020f0;
}
.org-outline-4 {
    /* outline-4 */
    color: #b22222;
}
.org-outline-5 {
    /* outline-5 */
    color: #228b22;
}
.org-outline-6 {
    /* outline-6 */
    color: #5f9ea0;
}
.org-outline-7 {
    /* outline-7 */
    color: #da70d6;
}
.org-outline-8 {
    /* outline-8 */
    color: #bc8f8f;
}
.org-preprocessor {
    /* font-lock-preprocessor-face */
    color: #da70d6;
}
.org-query-replace {
    /* query-replace */
    color: #b0e2ff;
    background-color: #cd00cd;
}
.org-regexp-grouping-backslash {
    /* font-lock-regexp-grouping-backslash */
    font-weight: bold;
}
.org-regexp-grouping-construct {
    /* font-lock-regexp-grouping-construct */
    font-weight: bold;
}
.org-region {
    /* region */
    background-color: #eedc82;
}
.org-rmail-highlight {
}
.org-scroll-bar {
    /* scroll-bar */
    background-color: #bfbfbf;
}
.org-secondary-selection {
    /* secondary-selection */
    background-color: #ffff00;
}
.org-shadow {
    /* shadow */
    color: #7f7f7f;
}
.org-show-paren-match {
    /* show-paren-match */
    background-color: #40e0d0;
}
.org-show-paren-mismatch {
    /* show-paren-mismatch */
    color: #ffffff;
    background-color: #a020f0;
}
.org-string {
    /* font-lock-string-face */
    color: #bc8f8f;
}
.org-texinfo-heading {
    /* texinfo-heading */
    color: #0000ff;
}
.org-tool-bar {
    /* tool-bar */
    color: #000000;
    background-color: #bfbfbf;
}
.org-tooltip {
    /* tooltip */
    color: #000000;
    background-color: #ffffe0;
}
.org-trailing-whitespace {
    /* trailing-whitespace */
    background-color: #ff0000;
}
.org-type {
    /* font-lock-type-face */
    color: #228b22;
}
.org-underline {
    /* underline */
    text-decoration: underline;
}
.org-variable-name {
    /* font-lock-variable-name-face */
    color: #b8860b;
}
.org-variable-pitch {
}
.org-vertical-border {
}
.org-warning {
    /* font-lock-warning-face */
    color: #ff0000;
    font-weight: bold;
}



.logo-link {
    position: fixed;
    top: 10px;
    left: 30px;
}

/* These style are only for IE: */

* html {
    overflow: hidden;
    padding-bottom:0px;
    margin:0px;
}

* html body {
    height: 100%;
    overflow:auto;
    font-size: 100%;
    margin: 0px 0px 0px 250px;
    padding: 0px 10% 0px 0px;
}
/* 针对Ie ,好像因为iexplore 不认识position:fixed 所以没办法让
   导航部分的显示固定在特定的位置，不随滚动条而滚动
 */
* html #table-of-contents {
    position: absolute;
    width:200px;
    left:10px
    /*
      The evil IE-JavaScript hack :-) depends on Picture and y-distance.
      Added to support small screens (Netbooks...).
      */
    top: expression( ( 30 + ( noValue = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' );
    /* top: expression((document.body.clientHeight - 210) + "px"); */
     /* height: expression((document.body.clientHeight - 210) + "px"); */
}
* html #org-div-home-and-up {
    position: absolute;
    width:200px;
    right:25px;
    /*
      The evil IE-JavaScript hack :-) depends on Picture and y-distance.
      Added to support small screens (Netbooks...).
      */
    /* top: expression( ( 10 + ( noValue = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ) ) + 'px' ); */
    /* top: expression((document.body.clientHeight - 210) + "px"); */
     /* height: expression((document.body.clientHeight - 210) + "px"); */
}
* html #org-src{
    position: absolute;
    width:25px;
    right:20px;
}
* html #htmlized-src{
    position: absolute;
    width:120px;
    right:20px;
}

* html p.author{
    position: absolute;
    width:125px;
    left:20px;
}
* html p.date{
    position: absolute;
    width:225px;
    left:20px;
    bottom:0px;
}
* html p.creator{
    position: absolute;
    width:425px;
    left:20px;
    bottom:20px;
}

* html h1 {
    margin-top:10px;
}

* html .logo-link {
    position: absolute;
    top: 10px;
    left: 30px;
}

* html #logo-text{
    font-size: 75%;
	position: absolute;
	display: block;
	right: 10px;
	bottom: 3px;
	overflow:hidden;
}
 
 
* html div#tags {
	font-size: 75%;
	/* line-height: 1.4em; */
	position: absolute;
	display: block;
	right: -2px;
	top: 10%;
	width: 150px;
	/* min-height:60px; */
	max-height:95%;
	/* overflow:visible; */
    /* white-space:pre-wrap; */
}

    </style>
<link rel="stylesheet" type="text/css" href="../style/emacs.css" />
<script type='text/javascript' src='../js/emacs.js'> </script>

</head>
<body>
<div id="org-div-home-and-up" style="text-align:right;font-size:70%;white-space:nowrap;">
 <a accesskey="h" href="../sitemap.html"> 站点地图 </a>
 |
 <a accesskey="H" href="../index.html"> 首页 </a>
</div>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">3.ManageAnOracleInstance.org</h1>


<div id='logo-img' ><a  href='../index.html'>▇█▓▒░◕~◕░▒▓█▇</a></div>

<div id='logo-text'>
  <a href='#' ><span align="left">░◕~◕░</span></a>
</div>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">学习目标</a></li>
<li><a href="#sec-2">$ORACLE_BASE  $ORACLE_HOME $ORACLE_SID</a></li>
<li><a href="#sec-3">Initialization  Parameter Files 参数文件</a>
<ul>
<li><a href="#sec-3-1">Static parameter file :PFILE ,纯文本。</a></li>
<li><a href="#sec-3-2">Persistent server parameter file : SPFILE</a></li>
</ul>
</li>
<li><a href="#sec-4">oracle的启动过程</a></li>
<li><a href="#sec-5">谁能开关oracle</a></li>
<li><a href="#sec-6">oracle database 的状态</a>
<ul>
<li><a href="#sec-6-1">shutdown-&mdash;&gt;nomount启动一个instance</a></li>
<li><a href="#sec-6-2">nomount-&mdash;&gt;mount 将这个启动的instance与database进行关联</a></li>
<li><a href="#sec-6-3">mount&ndash;&mdash;&gt;open</a></li>
<li><a href="#sec-6-4">oracle状态的切换</a></li>
<li><a href="#sec-6-5">Restricted mode 受限模式，</a></li>
<li><a href="#sec-6-6">Read Mode</a></li>
<li><a href="#sec-6-7">oracle database的关闭</a></li>
</ul>
</li>
<li><a href="#sec-7">Diagnostic Files (诊断文件)</a>
<ul>
<li><a href="#sec-7-1">alert_SID.log</a></li>
<li><a href="#sec-7-2">Background  trace files</a></li>
<li><a href="#sec-7-3">user trace files</a></li>
</ul>
</li>
<li><a href="#sec-8">sqlplus 小技巧，调整某列的显示宽度</a></li>
<li><a href="#sec-9">oracle instance 启动后，查看parameter的值。</a>
<ul>
<li><a href="#sec-9-1">查动态视图 v$parameter</a></li>
<li><a href="#sec-9-2">通过show parameter命令，</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">学习目标</h2>
<div class="outline-text-2" id="text-1">

<ul>
<li>create and manager  initialization parameter files 管理参数文件
</li>
<li>start up and shutdown oracle instance.启动关闭oracle instance
</li>
<li>monitor and use diagnostic files 
</li>
</ul>


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">$ORACLE_BASE  $ORACLE_HOME $ORACLE_SID</h2>
<div class="outline-text-2" id="text-2">

<p>  oracle 公司不只oracle数据库一个软件，他们希望把他们的所有软件安装在同一个
  目录下，即$ORACLE_BASE目录。而$ORACLE_HOME的值则是oracle数据库的安装目录.
  它是 $ORACLE_BASE下的一个目录。而 $ORACLE_SID则是一个数据库instance的名称。
  一个oracle database可以有多个oracle instance.而不同的instance 通过
  $ORACLE_SID 来区分。另外 在linux上。一个oracle instance 会启用多个进程，它
  们共享一块内存，而这块内存的位置是通过 $ORACLE_HOME与$ORACLE_SID两个变量的
  值通过hash 计算后得到的。（可以这样理解，可能并不完全正确）.Windows 上，一
  个oracle instance 只有一个进程，进程中再分出多个线程。所以不需要进程间共享
  内存。
  比如我系统上对应的值是：
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">$ORACLE_BASE</td><td class="left"><i>home/oracle</i></td></tr>
<tr><td class="left">$ORACLE_HOME</td><td class="left">/home/oracle/app/oracle/product/11.2.0/dbhome_1</td></tr>
<tr><td class="left">$ORACLE_SID</td><td class="left">orcl</td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Initialization  Parameter Files 参数文件</h2>
<div class="outline-text-2" id="text-3">


<p>  
  参数文件分两种,参数文件在linux上位于 $ORACLE_HOME/dbs/目录下。windows 上，
  好像是 $ORACLE_HOME/database/. 参数分explicit和inplicit ，显式或隐式。未声
  明的则使用oracle默认的设置，即inplicit
</p>
</div>

<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">Static parameter file :PFILE ,纯文本。</h3>
<div class="outline-text-3" id="text-3-1">

<p>     $ORACLE_HOME/dbs/initSID.ora (注：SID为 $ORACLE_SID的值)如initorcl.ora
     其中的值会在oracle instance 启动时读入。目录下有个init.ora的示例文件，
     可以参照之。不过好像oracle9上的init.ora文件太老了，最后修改时间1989年针
     对oracle8的，可能不能用。好像不推荐使用。 在linux 上，没实验成功.
</p>
</div>

</div>

<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2">Persistent server parameter file : SPFILE</h3>
<div class="outline-text-3" id="text-3-2">

<p>     也位于 $ORACLE_HOME/dbs/目录下。名称以spfie打头。
</p><ul>
<li>二进制文件。
</li>
<li>由oracle server来维护，即，通过sqlplus用命令修改。
</li>
<li>Always resides on the server side 存在于oracle 服务器上，不在客户端。
       (防止多个版本的存在，导致你不知该用哪个pfile)
</li>
<li>ability to make changes persistent across  shutdown and startup
       修改后，即使重启，关闭，它会一直有效。
</li>
<li>can have Recovery Manager(RMan ,oracle的备份工具)support backing up
       to initialization file .即，RM备份时他会备份 initialization file .
</li>
</ul>

<ul>
<li id="sec-3-2-1">创建SPFILE<br/>
<ul>
<li>根据PFILE 创建SPFILE
          进入sqlplus后使用以下命令 
       create spfile= '/tmp/spfile_example1'  FROM pfile= '/tmp/init.ora';
       或者简写为，
        create spfile from pfile; 则使用默认的pfile 创建spfle
        前提是默认的pfile 存在。
        使用linux 下的命令strings 查看生成的spfile 中的字符串
        strings /tmp/spfile_example1
</li>
</ul>

</li>
</ul>
<ul>
<li id="sec-3-2-2">修改 SPFILE的内容。<br/>



<pre class="src src-sql">alert system set parameter = value  &lt;comment= <span class="org-string">'text'</span>&gt;  &lt;deferred&gt;
&lt;scope=  memory|spfile|both&gt; &lt;sid=<span class="org-string">'sid|*'</span>&gt;
</pre>

<p>
    括号中的内容为可选
</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">comment</td><td class="left">注释</td></tr>
<tr><td class="left">deferred</td><td class="left">下一次登录的时候有效</td></tr>
<tr><td class="left">scope</td><td class="left">影响的范围，只修改内存中的参数，修改spfile,两者都修改 （默认both）</td></tr>
<tr><td class="left">sid</td><td class="left">可以指定只对某一特定的instance的参数进行修改</td></tr>
</tbody>
</table>

    alter system set undo_tablespace=undo2;
    alert system reset undo_tablespace;
    详见联机文档
</li>
</ul>
<ul>
<li id="sec-3-2-3">根据 SPFILE创建 PFILE<br/>
    create pfile ='/tmp/pfile' from spfile
    create pfile ='/tmp/pfile' from spfile='/tmp/spfile.ora'
</li>
</ul>
<ul>
<li id="sec-3-2-4">SPFILE 比 PFILE好<br/>

</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">oracle的启动过程</h2>
<div class="outline-text-2" id="text-4">

<p>  oracle寻找 parameter file的顺序
</p><ul>
<li>spfileSID.ora
</li>
<li>Default spfile : spfile.ora
</li>
<li>initSID.ora
</li>
<li>Default PFILE :(可能是init.ora,未验证)
     (这几个文件都在 $ORACLE_HOME/dbs/目录下)
     或者手动指定使用哪个 pfile
     startup  pfile='/path/to/pfile.ora'
     但是没有spfile='' 的参数
     不过可以有可选的解决方案，在一个pfile 中加入一句



<pre class="src src-sql">SPFILE=/path/to/spfile
</pre>

<p>
     然后使用
</p>


<pre class="src src-sql">startup pfile=<span class="org-string">'/path/to/pfile'</span>
</pre>

<p>
     间接指定spfile
</p></li>
</ul>


</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">谁能开关oracle</h2>
<div class="outline-text-2" id="text-5">

<p>  1). 操作系统的管理员
  2). 被赋予 sysdba system权限的用户
</p></div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">oracle database 的状态</h2>
<div class="outline-text-2" id="text-6">

<p>  &ndash;&mdash;&mdash;&mdash;&mdash;startup-&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&gt;
</p>
<p>  
  shutdown -&mdash;&gt; nomount&mdash;&mdash;&gt;mount&mdash;&mdash;&gt;open
</p>
<p>  
  &lt;&ndash;&mdash;&mdash;&mdash;&mdash;shutdown------------------------
</p>

</div>

<div id="outline-container-6-1" class="outline-3">
<h3 id="sec-6-1">shutdown-&mdash;&gt;nomount启动一个instance</h3>
<div class="outline-text-3" id="text-6-1">

<ul>
<li>首先读取参数文件(spfile or pfile)
</li>
<li>分配 SGA内存，启动后台进程,此时还没在oracle database与这段内在及进程关
   联.
</li>
<li>当instance 启动时，database 会将一些 explicit的parameter写到alert log 中。
    你可以依次运行



<pre class="src src-sql">sqlplus /nolog
conn / as sysdba 
startup nomount
alert database mount

</pre>

</li>
</ul>

</div>

</div>

<div id="outline-container-6-2" class="outline-3">
<h3 id="sec-6-2">nomount-&mdash;&gt;mount 将这个启动的instance与database进行关联</h3>
<div class="outline-text-3" id="text-6-2">

<p>      instance 寻找control file 并open 之.control file 是以
      CONTROL_FILES='/PATH/TO/CTL_FILE.ctl'.形式存在于parameter文件中的
</p></div>

</div>

<div id="outline-container-6-3" class="outline-3">
<h3 id="sec-6-3">mount&ndash;&mdash;&gt;open</h3>
<div class="outline-text-3" id="text-6-3">

<p>      mount之后，普通用户是无关连接database的.
      这个过程会根据control file 中的描述，寻找其他一些必须的文件
      (online datafiles ,redo log files).如果一个tablespace在上一次shutdown
      时处于offline状态，此时它依然如故(offline)，如果，没找到online
      datafiles ,or redo log files ,会报错.一般此时需要进行恢复。
      所以可以在不同的状态进行一定的维护工作。
</p>
</div>

</div>

<div id="outline-container-6-4" class="outline-3">
<h3 id="sec-6-4">oracle状态的切换</h3>
<div class="outline-text-3" id="text-6-4">

<ul>
<li>alter database nomount
</li>
<li>alert database mount
</li>
<li>alert database open
     状态只能从shutdown 到nomount ,由nomount变成mount 
     由mount 变open 而不能反过来。
</li>
</ul>

</div>

</div>

<div id="outline-container-6-5" class="outline-3">
<h3 id="sec-6-5">Restricted mode 受限模式，</h3>
<div class="outline-text-3" id="text-6-5">

<p>   只有具有restricted 权限的用户才能连上来，它跟open状态相同，只是不允许普通
   的用户连接上来，有些命令在mount状态下没法使用，而又不想启动到open状态。只
   能具有和restricted session系统权限的用户才可以访问数据库，
   而通常只有数据库管理员具有这种系统权限
   ，实例只能为管理用户服务，当采用这种模式启动时，主要是为了完成以下任务：
   1). 执行export或import数据
   2). 执行data load
   3). 临时防止用户使用数据
   4). 执行某些移植或升级操作
</p>


<pre class="src src-sql">startup restrict
</pre>

<p>
   如果已经处于open状态，可以使用
</p>


<pre class="src src-sql">alter system enable restricted session
alter system diable restricted session (&#22238;&#21040;&#27491;&#24120;open&#29366;&#24577;)
</pre>

<p>
   处于这种状态,一般是管理员想进行一定的维护工作。
   赋予某用户权限可以在restircted mode下工作. 
</p>


<pre class="src src-sql">grant restricted session to scott;
</pre>


<ul>
<li id="sec-6-5-1">查或kill掉一个会话 v$session 可知目前连接的会话,<br/>
    对于已经连接的session,可以把它踢出去



<pre class="src src-sql">select  SADDR ,SID,  SERIAL#,  AUDSID ,username from v$session;
</pre>

<p>
    这是表中的前几列， 主要看sid ,username ,可能会有很多username是空，表示
    这是一个后台进程，找到某一用户的sid后
</p>


<pre class="src src-sql"> alter system kill session <span class="org-string">'sid,serial#'</span>
alter system kill session <span class="org-string">'15,6'</span>
</pre>


</li>
</ul>
</div>

</div>

<div id="outline-container-6-6" class="outline-3">
<h3 id="sec-6-6">Read Mode</h3>
<div class="outline-text-3" id="text-6-6">




<pre class="src src-sql">startup mount
alter database open read only
</pre>

<p>
   可以：
</p><ul>
<li>execute queries
</li>
<li>execute disks sorts using  Logically Managered TableSpace
</li>
<li>take data files  offline or online ,but not tablespace(可以把
     tablespace的某个data file 设成离线，在线，但不能整个tablespace)
</li>
<li>perform recovery  of offline data files  and tablespace，可以对离线的
     data file 或 tablespace进行恢复操作.
</li>
</ul>



</div>

</div>

<div id="outline-container-6-7" class="outline-3">
<h3 id="sec-6-7">oracle database的关闭</h3>
<div class="outline-text-3" id="text-6-7">

<ul>
<li id="sec-6-7-1">Close a Database<br/>
    将SGA中的database data 、recovery data 写入data file 、redo log file
    the database is closed ,but still mounted 
</li>
</ul>
<ul>
<li id="sec-6-7-2">Unmount a Database<br/>
    disassociate a database from the instance.
    the database is unmounted .
    the control files is closed .
</li>
</ul>
<ul>
<li id="sec-6-7-3">Shutdown an instance<br/>
    SGA 内存释放，杀掉后台进程

</li>
</ul>
<ul>
<li id="sec-6-7-4">shutdown 命令<br/>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">shutdown mode</td><td class="left">abort</td><td class="left">immediate</td><td class="left">transactional</td><td class="left">normal</td></tr>
<tr><td class="left">all new connection</td><td class="left">No</td><td class="left">No</td><td class="left">No</td><td class="left">No</td></tr>
<tr><td class="left">wait until current session end</td><td class="left">no</td><td class="left">no</td><td class="left">no</td><td class="left">yes</td></tr>
<tr><td class="left">wait util current transaction end</td><td class="left">no</td><td class="left">no</td><td class="left">yes</td><td class="left">yes</td></tr>
<tr><td class="left">force a checkpoint and close files</td><td class="left">no</td><td class="left">yes</td><td class="left">yes</td><td class="left">yes</td></tr>
</tbody>
</table>




<pre class="src src-sql">shutdown immediate ,&#26368;&#24120;&#29992;&#65292;&#23427;&#19981;&#31561;&#20107;&#21153;&#23436;&#25104;&#65292;&#32780;&#26159;&#22238;&#28378;&#65292;&#20445;&#35777;&#25968;&#25454;&#30340;&#23436;&#25972;&#65292;&#21516;&#26102;
&#24555;&#36895;&#30340;&#20851;&#38381;
</pre>


</li>
</ul>
<ul>
<li id="sec-6-7-5">v$transcation 可以查是否有活动的事务，即未提交的事务。<br/>



<pre class="src src-sql">select addr ,status from v$transcation
</pre>

<p>
    shutdown transaction 命令会一直等到所有事务均提交后。
</p>
</li>
</ul>
</div>
</div>

</div>

<div id="outline-container-7" class="outline-2">
<h2 id="sec-7">Diagnostic Files (诊断文件)</h2>
<div class="outline-text-2" id="text-7">

<ul>
<li>记录一些大事件，如启动关闭等
</li>
<li>used to resolve problems
</li>
<li>used to better manage the database on a day-to-day  bsis
</li>
</ul>

<p>  主要包括以下几种类型的files
</p>
</div>

<div id="outline-container-7-1" class="outline-3">
<h3 id="sec-7-1">alert_SID.log</h3>
<div class="outline-text-3" id="text-7-1">

<ul>
<li>record you command
</li>
<li>record results of major event
</li>
<li>used for day-to-day operational  info.
</li>
<li>used to diagnosing  database error
</li>
</ul>

<p>它位于 background_dump_dest 参数对应的文件夹下。
show parameter dump 
</p>
</div>

</div>

<div id="outline-container-7-2" class="outline-3">
<h3 id="sec-7-2">Background  trace files</h3>
<div class="outline-text-3" id="text-7-2">

<p>    记录后台进程的信息，后台进程出错时记录
    文件名：    SID_precessName_pid.trc
</p></div>

</div>

<div id="outline-container-7-3" class="outline-3">
<h3 id="sec-7-3">user trace files</h3>
<div class="outline-text-3" id="text-7-3">

<p>    文件名：    SID_ora_pid.trc
    位置在user_dump_dest   
</p><ul>
<li>procuded by user process
</li>
<li>can  be generated by a server process
</li>
<li>contain statistics  for traced sql statement .
</li>
<li>contain usr messages
      默认只在user precess 出错时才记录。也可以随时都做
</li>
<li>alter session set sql_trace=true
      或者设参数sql_trace=true
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-8" class="outline-2">
<h2 id="sec-8">sqlplus 小技巧，调整某列的显示宽度</h2>
<div class="outline-text-2" id="text-8">

<ul>
<li>set pagesize 300
</li>
<li>set linesize 200
</li>
<li>col col_name format a30
</li>
</ul>


</div>

</div>

<div id="outline-container-9" class="outline-2">
<h2 id="sec-9">oracle instance 启动后，查看parameter的值。</h2>
<div class="outline-text-2" id="text-9">


</div>

<div id="outline-container-9-1" class="outline-3">
<h3 id="sec-9-1">查动态视图 v$parameter</h3>
<div class="outline-text-3" id="text-9-1">

<p>   select name ,value ,type from v$parameter where name='';
</p></div>

</div>

<div id="outline-container-9-2" class="outline-3">
<h3 id="sec-9-2">通过show parameter命令，</h3>
<div class="outline-text-3" id="text-9-2">

<p>   如： show parameter sga ，注参数名不需要输入完整的名称，如这个命令，会
   显示所有参数名称包含sga 的参数。
</p>



<div id='my-src'>
<div id='org-src'><a href='../src/oracle/3ManageAnOracleInstance.org'>src</a></div>
<div id='htmlized-src'><a href='../htmlized-src/oracle/3ManageAnOracleInstance.org.html'>htmlized-src</a></div>
</div>
<div id='tags'><span id='tags-title'>Tags:</span><br />
<p>
    <a href="../tags/@SVN.html">@SVN</a>
    <a href="../tags/@perl.html">@perl</a>
    <a href="../tags/@Java.html">@Java</a>
    <a href="../tags/@Mysql.html">@Mysql</a>
    <a href="../tags/@Erlang.html">@Erlang</a>
    <a href="../tags/@SQL.html">@SQL</a>
    <a href="../tags/@DB.html">@DB</a>
    <a href="../tags/@Oracle.html">@Oracle</a>
    <a href="../tags/@Ediff.html">@Ediff</a>
    <a href="../tags/@Git.html">@Git</a>
    <a href="../tags/@Cedet.html">@Cedet</a>
    <a href="../tags/@C-C++.html">@C-C++</a>
    <a href="../tags/@Daily.html">@Daily</a>
    <a href="../tags/@Eclipse.html">@Eclipse</a>
    <a href="../tags/@AutoHotKey.html">@AutoHotKey</a>
    <a href="../tags/@Windows.html">@Windows</a>
    <a href="../tags/@Linux.html">@Linux</a>
    <a href="../tags/@C.html">@C</a>
    <a href="../tags/@Emacs.html">@Emacs</a>
</p>


</div>
</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2011-07-09 六</p>
<p class="author">Author: 孤峰独秀</p>
<p class="creator">Org version 7.8.03 with Emacs version 24</p>


</div>
<p><br/><br/>
<!-- hhmts start --> <!-- hhmts end --></p>

</body>
</html>
